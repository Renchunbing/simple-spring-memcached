<assembly xmlns="http://maven.apache.org/plugins/maven-assembly-plugin/assembly/1.1.2" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
	xsi:schemaLocation="
  	http://maven.apache.org/plugins/maven-assembly-plugin/assembly/1.1.2 
  	http://maven.apache.org/xsd/assembly-1.1.2.xsd">

	<id>dist</id>
	<includeBaseDirectory>false</includeBaseDirectory>
	<formats>
		<format>zip</format>
	</formats>

	<moduleSets>
		<moduleSet>
 			<includeSubModules>false</includeSubModules>
			<sources>
				<outputDirectoryMapping>projects/${module.basedir.name}</outputDirectoryMapping>
        		<fileSets>
                    <fileSet>
                        <directory>/</directory>
                        <includes>
                            <include>**/pom.xml</include>
                            <include>**/src/**</include>
                            <include>**/.settings/*</include>
                            <include>**/.classpath</include>
                            <include>**/.project</include>
                        </includes>
                    </fileSet>
                </fileSets>
      		</sources>
      		<binaries>
        		<outputDirectory>dist</outputDirectory>
        		<unpack>false</unpack>
      		</binaries>
		</moduleSet>		
		<moduleSet>		
			<includeSubModules>false</includeSubModules>
			<sources>	
				<outputDirectoryMapping>src</outputDirectoryMapping>
        		 <fileSets>
                    <fileSet>
                        <directory>/target</directory>
                        <includes>
                            <include>**/*-sources.jar</include>
                        </includes>
                    </fileSet>
                </fileSets>
      		</sources>
		</moduleSet>
	</moduleSets>

	<fileSets>
		<fileSet>
			<outputDirectory>/</outputDirectory>
			<includes>
				<include>changelog.txt</include>
				<include>license.txt</include>
			</includes>
		</fileSet>
		<fileSet>
			<outputDirectory>/projects</outputDirectory>
			<includes>
				<include>pom.xml</include>
				<include>.settings/*</include>
                <include>.classpath</include>
                <include>.project</include>
				<include>readme.txt</include>
				<include>run-tests.bat</include>
				<include>start_memcached.sh</include>
			</includes>
		</fileSet>
		<fileSet>
			<directory>/target/site/apidocs/</directory>
			<outputDirectory>/docs/javadoc-api</outputDirectory>
			<includes>
				<include>**/*</include>
			</includes>
		</fileSet>
	</fileSets>

	<dependencySets>
		<dependencySet>
			<outputDirectory>lib</outputDirectory>
			<useProjectArtifact>false</useProjectArtifact>
			<scope>runtime</scope>
			<excludes>
				<exclude>${project.groupId}:*</exclude>
			</excludes>
			<includes>
				<include>*:*</include>
			</includes>
		</dependencySet>
		<dependencySet>
			<outputDirectory>lib</outputDirectory>
			<useProjectArtifact>false</useProjectArtifact>
			<scope>runtime</scope>
			<includes>
				<include>${project.groupId}:spymemcached</include>
			</includes>
		</dependencySet>		
		<dependencySet>
			<outputDirectory>lib</outputDirectory>
			<useProjectArtifact>false</useProjectArtifact>
			<scope>test</scope>
			<includes>
				<include>log4j:log4j</include>
				<include>org.slf4j:slf4j-log4j12</include>
			</includes>
		</dependencySet>
	</dependencySets>
</assembly>
